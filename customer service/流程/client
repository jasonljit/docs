// æ²’å¸¶ userProfile çš„ç™»å…¥

GET ('/')
	user è¼¸å…¥ usernameï¼Œæ”¾åœ¨query stringï¼Œå°å‘ '/c-preinit'

GET ('/c-preinit?clientId=username_TIMESTAMP')
	client ç›¸é—œè³‡è¨Šæœƒå­˜åœ¨ req.session.client = { clientId, conversationId } (ä¹‹å‰é€£éçš„å®¢æˆ¶æ‰æœƒæœ‰conversationId)
	å¦‚æœå®¢æˆ¶ä¹‹å‰é€£éï¼Œä¸”ä¹‹å‰é€²å…¥çš„ conversation é‚„é–‹è‘—ï¼Œå‰‡ redirect('/c')
	æ–°å®¢æˆ¶ render å®Œï¼Œé é¢ä¸Šçš„æŒ‰éˆ•ä¹Ÿæ˜¯å°å‘ '/c'

GET ('/c')
	é€£éçš„å®¢æˆ¶ï¼šæŠŠä¹‹å‰çš„ conversation æ’ˆå‡ºä¾†
	æ–°å®¢æˆ¶ï¼šå»ºç«‹æ–° conversationï¼Œç”¢ç”Ÿ tag åˆ—è¡¨ (conversation reply)ï¼Œ
	ä¸¦ä¸” io.to(conversationId).emit("bot-message", { conversationReply })
	ğŸ¤” é€™æ™‚å€™å®¢æˆ¶é‚„æ²’é€£ä¸Š socketï¼Œç‚ºä½•è¦ io.emit
	ğŸ¤” ç‚ºä½• bot-message éƒ½æ˜¯ç”¨ global.SOCKET_IO
	ğŸ¤” ç‚ºä½•è¦ delete conversation.userProfile
	render('client.pug', { conversation, entranceURL })

	client side
		connect socket
		socket.emit('client-init')


// å¸¶ userProfile çš„ç™»å…¥

GET ('/client-preinit?clientId&host&userProfile&')
	client è‡ªå¸¶ userProfile çš„ç™»å…¥æ–¹å¼
	req.userProfile
	req.session.client = { clientId, userProfile }
	å¦‚æœå®¢æˆ¶ä¹‹å‰é€£éï¼Œä¸”ä¹‹å‰é€²å…¥çš„ conversation é‚„é–‹è‘—ï¼Œå‰‡ redirect('/client')
	èŠå¤©å®¤é€²å…¥é»ï¼š/client

GET ('/client')
	ç”¨å¸¶é€²ä¾†çš„ userProfile æ›´æ–°å·²å­˜åœ¨çš„ conversaion æˆ– å»ºç«‹æ–°çš„
	res.render("pages/client.pug", { conversation, entranceUrl })

	client side
		connect socket
		socket.emit('client-init')


socket.on('client-init', (socket, data))
	data = {
		user,
		conversation,
	}
	emitter.emit('client-init')
		join conversation
		æ’ˆ conversationReply, tags, tagCategories, conversation
	emitter.emit('client-online')
		set conversation status to 'client-online'
	emitter.emit('set-client-data-on-line')
		åœ¨ socket.data ä¸‹ å¡ä¸€å †æ±è¥¿
